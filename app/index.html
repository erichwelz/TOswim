<!doctype html>
<html lang="en" ng-app="TOswimApp" ng-controller="PoolListCtrl">
<head>
  <meta charset="utf-8">
  <title>TO Swim: {{query}}</title>
  <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">
  <link rel="stylesheet" href="css/app.css">
  <script src="bower_components/angular/angular.js"></script>
  <script src="bower_components/lodash/lodash.js"></script>
  <script src="js/controllers.js"></script>
  <script src="js/filters.js"></script>
</head>
<body>
  <p>Total number of pools: {{pools.length}}</p>

  <div class="container-fluid">
    <div class="col-md-2">
      <!-- Sidebar content -->

      <label>Universal search: <input ng-model="query"></label>

  Date:
  <select name="repeatSelect" id="repeatSelect" ng-model="filter[date]">
   <option ng-repeat="date in getDates()" value="{{date}}">{{date}}</option>
  </select>

  Sort by:
  <select ng-model="orderProp">
    <option value="name">Pool Name</option>
    <option value="address">Pool Address</option>
  </select>

    </div>
  </div>

  <div class="col-md-10">
    <!-- Body content -->
    <p>Matches: {{filtered.length}}</p>
    <ul class="pools">
      <li ng-repeat="pool in filtered=(pools | filter:filterByTime) | orderBy:orderProp | limitTo:quantity">
        <span>{{pool.name}}</span><br />
        <span>Address: {{pool.address}}</span><br>
        <span>Distance: {{getDistance(pool.coordinates.latitude, pool.coordinates.longitude)}} KM </span><br>
        <span>Pool Coordinates</span>
          <ul>
            <li>Lat: {{pool.coordinates.latitude}}</li>
            <li>Long: {{pool.coordinates.longitude}}</li>
          </ul>
          <span> Swim Times</span>
          <ul>
            <li ng-repeat="(date, times) in pool.times | limitKeysTo:5">{{date}}
              <ul>
                <li ng-repeat="time in times"> {{time}}</li>
              </ul>
            </li>
          </ul

      </li>
    </ul>

    <pre>{{pools | filter:query |orderBy:orderProp | json}}</pre>
  </div>
</body>
</html>
